{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"/Users/vanshikamaheshwari/Desktop/untitled folder 2/frontend/src/contexts/CartContext.jsx\",\n  _s = $RefreshSig$();\nimport { createContext, useCallback, useEffect, useMemo, useReducer } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  items: []\n};\nfunction cartReducer(state, action) {\n  console.log('Cart reducer action:', action.type, action.payload);\n  console.log('Current state before action:', state);\n  switch (action.type) {\n    case 'ADD_ITEM':\n      {\n        const existingItemIndex = state.items.findIndex(item => /*#__PURE__*/_jsxDEV(\"item\", {\n          className: \"ID\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 19\n        }, this) === action.payload.ItemId);\n        if (existingItemIndex > -1) {\n          const updatedItems = [...state.items];\n          updatedItems[existingItemIndex] = {\n            ...updatedItems[existingItemIndex],\n            quantity: updatedItems[existingItemIndex].quantity + 1\n          };\n          return {\n            ...state,\n            items: updatedItems\n          };\n        } else {\n          const newItem = {\n            menuItemId: action.payload.menuItemId,\n            name: action.payload.name,\n            price: action.payload.price,\n            quantity: 1\n          };\n          return {\n            ...state,\n            items: [...state.items, newItem]\n          };\n        }\n      }\n    case 'REMOVE_ITEM':\n      {\n        const updatedItems = state.items.filter(item => item.menuItemId !== action.payload.menuItemId);\n        return {\n          ...state,\n          items: updatedItems\n        };\n      }\n    case 'UPDATE_QUANTITY':\n      {\n        const {\n          menuItemId,\n          quantity\n        } = action.payload;\n        if (quantity <= 0) {\n          return cartReducer(state, {\n            type: 'REMOVE_ITEM',\n            payload: {\n              menuItemId\n            }\n          });\n        }\n        const updatedItems = state.items.map(item => item.menuItemId === menuItemId ? {\n          ...item,\n          quantity\n        } : item);\n        return {\n          ...state,\n          items: updatedItems\n        };\n      }\n    case 'CLEAR_CART':\n      return initialState;\n    default:\n      return state;\n  }\n}\nexport const CartContext = /*#__PURE__*/createContext(undefined);\nexport function CartProvider({\n  children\n}) {\n  _s();\n  const [state, dispatch] = useReducer(cartReducer, initialState, () => {\n    try {\n      if (typeof window !== 'undefined') {\n        const savedCart = localStorage.getItem('cart');\n        if (savedCart) {\n          return {\n            items: JSON.parse(savedCart)\n          };\n        }\n      }\n    } catch (e) {\n      console.error('Error loading cart from localStorage:', e);\n    }\n    return initialState;\n  });\n  useEffect(() => {\n    try {\n      if (typeof window !== 'undefined') {\n        localStorage.setItem('cart', JSON.stringify(state.items));\n      }\n    } catch (e) {\n      console.error('Error saving cart to localStorage:', e);\n    }\n  }, [state.items]);\n  const addItem = useCallback(item => {\n    dispatch({\n      type: 'ADD_ITEM',\n      payload: item\n    });\n  }, []);\n  const removeItem = useCallback(menuItemId => {\n    dispatch({\n      type: 'REMOVE_ITEM',\n      payload: {\n        menuItemId\n      }\n    });\n  }, []);\n  const updateQuantity = useCallback((menuItemId, quantity) => {\n    dispatch({\n      type: 'UPDATE_QUANTITY',\n      payload: {\n        menuItemId,\n        quantity\n      }\n    });\n  }, []);\n  const clearCart = useCallback(() => {\n    dispatch({\n      type: 'CLEAR_CART'\n    });\n  }, []);\n  const totalPrice = useMemo(() => {\n    return state.items.reduce((total, item) => total + item.price * item.quantity, 0);\n  }, [state.items]);\n  const totalItems = useMemo(() => {\n    return state.items.reduce((total, item) => total + item.quantity, 0);\n  }, [state.items]);\n  const value = useMemo(() => ({\n    items: state.items,\n    addItem,\n    removeItem,\n    updateQuantity,\n    clearCart,\n    totalPrice,\n    totalItems\n  }), [state.items, addItem, removeItem, updateQuantity, clearCart, totalPrice, totalItems]);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 10\n  }, this);\n}\n_s(CartProvider, \"Cbk8IN8VHmdoKTeWQtn3EnBSUxg=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","createContext","useCallback","useEffect","useMemo","useReducer","jsxDEV","_jsxDEV","initialState","items","cartReducer","state","action","console","log","type","payload","existingItemIndex","findIndex","item","className","fileName","lineNumber","columnNumber","ItemId","updatedItems","quantity","newItem","menuItemId","name","price","filter","map","CartContext","undefined","CartProvider","children","dispatch","window","savedCart","localStorage","getItem","JSON","parse","e","error","setItem","stringify","addItem","removeItem","updateQuantity","clearCart","totalPrice","reduce","total","totalItems","value","Provider","_c","$RefreshReg$"],"sources":["/Users/vanshikamaheshwari/Desktop/untitled folder 2/frontend/src/contexts/CartContext.jsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useCallback, useEffect, useMemo, useReducer } from 'react';\n\nconst initialState = {\n  items: [],\n};\n\nfunction cartReducer(state, action) {\n  console.log('Cart reducer action:', action.type, action.payload);\n  console.log('Current state before action:', state);\n\n  switch (action.type) {\n    case 'ADD_ITEM': {\n      const existingItemIndex = state.items.findIndex(\n        (item) => <item className=\"ID\"></item> === action.payload.ItemId\n      );\n\n      if (existingItemIndex > -1) {\n        const updatedItems = [...state.items];\n        updatedItems[existingItemIndex] = {\n          ...updatedItems[existingItemIndex],\n          quantity: updatedItems[existingItemIndex].quantity + 1,\n        };\n        return { ...state, items: updatedItems };\n      } else {\n        const newItem = {\n          menuItemId: action.payload.menuItemId,\n          name: action.payload.name,\n          price: action.payload.price,\n          quantity: 1,\n        };\n        return { ...state, items: [...state.items, newItem] };\n      }\n    }\n\n    case 'REMOVE_ITEM': {\n      const updatedItems = state.items.filter(\n        (item) => item.menuItemId !== action.payload.menuItemId\n      );\n      return { ...state, items: updatedItems };\n    }\n\n    case 'UPDATE_QUANTITY': {\n      const { menuItemId, quantity } = action.payload;\n\n      if (quantity <= 0) {\n        return cartReducer(state, {\n          type: 'REMOVE_ITEM',\n          payload: { menuItemId }\n        });\n      }\n\n      const updatedItems = state.items.map((item) =>\n        item.menuItemId === menuItemId ? { ...item, quantity } : item\n      );\n\n      return { ...state, items: updatedItems };\n    }\n\n    case 'CLEAR_CART':\n      return initialState;\n\n    default:\n      return state;\n  }\n}\n\nexport const CartContext = createContext(undefined);\n\nexport function CartProvider({ children }) {\n  const [state, dispatch] = useReducer(cartReducer, initialState, () => {\n    try {\n      if (typeof window !== 'undefined') {\n        const savedCart = localStorage.getItem('cart');\n        if (savedCart) {\n          return { items: JSON.parse(savedCart) };\n        }\n      }\n    } catch (e) {\n      console.error('Error loading cart from localStorage:', e);\n    }\n    return initialState;\n  });\n\n  useEffect(() => {\n    try {\n      if (typeof window !== 'undefined') {\n        localStorage.setItem('cart', JSON.stringify(state.items));\n      }\n    } catch (e) {\n      console.error('Error saving cart to localStorage:', e);\n    }\n  }, [state.items]);\n\n  const addItem = useCallback((item) => {\n    dispatch({ type: 'ADD_ITEM', payload: item });\n  }, []);\n\n  const removeItem = useCallback((menuItemId) => {\n    dispatch({ type: 'REMOVE_ITEM', payload: { menuItemId } });\n  }, []);\n\n  const updateQuantity = useCallback((menuItemId, quantity) => {\n    dispatch({ type: 'UPDATE_QUANTITY', payload: { menuItemId, quantity } });\n  }, []);\n\n  const clearCart = useCallback(() => {\n    dispatch({ type: 'CLEAR_CART' });\n  }, []);\n\n  const totalPrice = useMemo(() => {\n    return state.items.reduce(\n      (total, item) => total + item.price * item.quantity,\n      0\n    );\n  }, [state.items]);\n\n  const totalItems = useMemo(() => {\n    return state.items.reduce((total, item) => total + item.quantity, 0);\n  }, [state.items]);\n\n  const value = useMemo(() => ({\n    items: state.items,\n    addItem,\n    removeItem,\n    updateQuantity,\n    clearCart,\n    totalPrice,\n    totalItems,\n  }), [\n    state.items,\n    addItem,\n    removeItem,\n    updateQuantity,\n    clearCart,\n    totalPrice,\n    totalItems\n  ]);\n\n  return <CartContext.Provider value={value}>{children}</CartContext.Provider>;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}