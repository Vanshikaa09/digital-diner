{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"/Users/vanshikamaheshwari/Desktop/untitled folder 2/frontend/src/contexts/CartContext.jsx\",\n  _s = $RefreshSig$();\nimport { createContext, useCallback, useEffect, useMemo, useReducer } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  items: []\n};\nconst cartReducer = (state, action) => {\n  switch (action.type) {\n    case ADD_ITEM:\n      return {\n        ...state,\n        items: [...state.items, action.payload]\n      };\n    case REMOVE_ITEM:\n      // Ensure the item exists before removing\n      return {\n        ...state,\n        items: state.items.filter(item => (item === null || item === void 0 ? void 0 : item.menuItemId) !== action.payload)\n      };\n    case UPDATE_QUANTITY:\n      // Ensure the item exists before updating the quantity\n      return {\n        ...state,\n        items: state.items.map(item => (item === null || item === void 0 ? void 0 : item.menuItemId) === action.payload.menuItemId ? {\n          ...item,\n          quantity: action.payload.quantity\n        } : item)\n      };\n    case CLEAR_CART:\n      return {\n        ...state,\n        items: []\n      };\n    default:\n      return state;\n  }\n};\nexport const CartContext = /*#__PURE__*/createContext(undefined);\nexport function CartProvider({\n  children\n}) {\n  _s();\n  const [state, dispatch] = useReducer(cartReducer, initialState, () => {\n    try {\n      if (typeof window !== 'undefined') {\n        const savedCart = localStorage.getItem('cart');\n        if (savedCart) {\n          return {\n            items: JSON.parse(savedCart)\n          };\n        }\n      }\n    } catch (e) {\n      console.error('Error loading cart from localStorage:', e);\n    }\n    return initialState;\n  });\n  useEffect(() => {\n    try {\n      if (typeof window !== 'undefined') {\n        localStorage.setItem('cart', JSON.stringify(state.items));\n      }\n    } catch (e) {\n      console.error('Error saving cart to localStorage:', e);\n    }\n  }, [state.items]);\n  const addItem = useCallback(item => {\n    dispatch({\n      type: 'ADD_ITEM',\n      payload: item\n    });\n  }, []);\n  const removeItem = useCallback(menuItemId => {\n    dispatch({\n      type: 'REMOVE_ITEM',\n      payload: {\n        menuItemId\n      }\n    });\n  }, []);\n  const updateQuantity = useCallback((menuItemId, quantity) => {\n    dispatch({\n      type: 'UPDATE_QUANTITY',\n      payload: {\n        menuItemId,\n        quantity\n      }\n    });\n  }, []);\n  const clearCart = useCallback(() => {\n    dispatch({\n      type: 'CLEAR_CART'\n    });\n  }, []);\n  const totalPrice = useMemo(() => {\n    return state.items.reduce((total, item) => total + item.price * item.quantity, 0);\n  }, [state.items]);\n  const totalItems = useMemo(() => {\n    return state.items.reduce((total, item) => total + item.quantity, 0);\n  }, [state.items]);\n  const value = useMemo(() => ({\n    items: state.items,\n    addItem,\n    removeItem,\n    updateQuantity,\n    clearCart,\n    totalPrice,\n    totalItems\n  }), [state.items, addItem, removeItem, updateQuantity, clearCart, totalPrice, totalItems]);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 10\n  }, this);\n}\n_s(CartProvider, \"Cbk8IN8VHmdoKTeWQtn3EnBSUxg=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","createContext","useCallback","useEffect","useMemo","useReducer","jsxDEV","_jsxDEV","initialState","items","cartReducer","state","action","type","ADD_ITEM","payload","REMOVE_ITEM","filter","item","menuItemId","UPDATE_QUANTITY","map","quantity","CLEAR_CART","CartContext","undefined","CartProvider","children","dispatch","window","savedCart","localStorage","getItem","JSON","parse","e","console","error","setItem","stringify","addItem","removeItem","updateQuantity","clearCart","totalPrice","reduce","total","price","totalItems","value","Provider","fileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/vanshikamaheshwari/Desktop/untitled folder 2/frontend/src/contexts/CartContext.jsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useCallback, useEffect, useMemo, useReducer } from 'react';\n\nconst initialState = {\n  items: [],\n};\n\nconst cartReducer = (state, action) => {\n  switch (action.type) {\n    case ADD_ITEM:\n      return { ...state, items: [...state.items, action.payload] };\n      \n    case REMOVE_ITEM:\n      // Ensure the item exists before removing\n      return {\n        ...state,\n        items: state.items.filter(item => item?.menuItemId !== action.payload),\n      };\n\n    case UPDATE_QUANTITY:\n      // Ensure the item exists before updating the quantity\n      return {\n        ...state,\n        items: state.items.map(item =>\n          item?.menuItemId === action.payload.menuItemId\n            ? { ...item, quantity: action.payload.quantity }\n            : item\n        ),\n      };\n\n    case CLEAR_CART:\n      return { ...state, items: [] };\n      \n    default:\n      return state;\n  }\n};\n\n\nexport const CartContext = createContext(undefined);\n\nexport function CartProvider({ children }) {\n  const [state, dispatch] = useReducer(cartReducer, initialState, () => {\n    try {\n      if (typeof window !== 'undefined') {\n        const savedCart = localStorage.getItem('cart');\n        if (savedCart) {\n          return { items: JSON.parse(savedCart) };\n        }\n      }\n    } catch (e) {\n      console.error('Error loading cart from localStorage:', e);\n    }\n    return initialState;\n  });\n\n  useEffect(() => {\n    try {\n      if (typeof window !== 'undefined') {\n        localStorage.setItem('cart', JSON.stringify(state.items));\n      }\n    } catch (e) {\n      console.error('Error saving cart to localStorage:', e);\n    }\n  }, [state.items]);\n\n  const addItem = useCallback((item) => {\n    dispatch({ type: 'ADD_ITEM', payload: item });\n  }, []);\n\n  const removeItem = useCallback((menuItemId) => {\n    dispatch({ type: 'REMOVE_ITEM', payload: { menuItemId } });\n  }, []);\n\n  const updateQuantity = useCallback((menuItemId, quantity) => {\n    dispatch({ type: 'UPDATE_QUANTITY', payload: { menuItemId, quantity } });\n  }, []);\n\n  const clearCart = useCallback(() => {\n    dispatch({ type: 'CLEAR_CART' });\n  }, []);\n\n  const totalPrice = useMemo(() => {\n    return state.items.reduce(\n      (total, item) => total + item.price * item.quantity,\n      0\n    );\n  }, [state.items]);\n\n  const totalItems = useMemo(() => {\n    return state.items.reduce((total, item) => total + item.quantity, 0);\n  }, [state.items]);\n\n  const value = useMemo(() => ({\n    items: state.items,\n    addItem,\n    removeItem,\n    updateQuantity,\n    clearCart,\n    totalPrice,\n    totalItems,\n  }), [\n    state.items,\n    addItem,\n    removeItem,\n    updateQuantity,\n    clearCart,\n    totalPrice,\n    totalItems\n  ]);\n\n  return <CartContext.Provider value={value}>{children}</CartContext.Provider>;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}